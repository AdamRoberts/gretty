apply plugin: 'groovy'
apply plugin: 'war'
apply plugin: 'gretty'

ext {
  gebVersion = '0.9.2'
  seleniumVersion = '2.40.0'
}

dependencies {
  testCompile "org.codehaus.groovy:groovy-all:$groovy_version"
  testCompile "org.spockframework:spock-core:$spock_version"
  testCompile "org.gebish:geb-spock:$gebVersion"
  testCompile "org.seleniumhq.selenium:selenium-support:$seleniumVersion"
  testCompile "org.seleniumhq.selenium:selenium-firefox-driver:$seleniumVersion"
}

test {
  include '**/Test*.*'
  include '**/*Test.*'
  exclude '**/*IT.*'
}

task integrationTest(type: Test, dependsOn: 'test') {
  include '**/*IT.*'
  systemProperty 'geb.build.reportsDir', reporting.file('geb')
}

gretty {
  integrationTestTask = 'integrationTest'
}
